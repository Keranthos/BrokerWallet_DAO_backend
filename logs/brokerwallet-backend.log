2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@79e32b54
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@73cc3ed7
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 29 ms
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 00:00:00 [http-nio-5000-exec-1] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807) ~[na:na]
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103) ~[classes/:na]
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55) ~[classes/:na]
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.1.jar:6.1.1]
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:00 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 00:00:00 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 00:00:01 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 00:00:01 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 00:00:01 [http-nio-5000-exec-1] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:01 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 00:00:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:02 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 00:00:02 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 00:00:02 [http-nio-5000-exec-2] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 00:00:02 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 00:00:02 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 00:00:03 [http-nio-5000-exec-2] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807) ~[na:na]
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103) ~[classes/:na]
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55) ~[classes/:na]
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.1.jar:6.1.1]
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-10-09 00:00:03 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 00:00:03 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 00:00:03 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:03 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:03 [http-nio-5000-exec-2] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 00:00:03 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 00:00:04 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 00:00:04 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 00:00:04 [http-nio-5000-exec-2] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:04 [http-nio-5000-exec-2] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 00:00:04 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=8c056ccb92c567da3fee27c23d4f2f107f203879&page=0&size=20", parameters={masked}
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 00:00:05 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/medals/0x8c056ccb92c567da3fee27c23d4f2f107f203879", parameters={}
2025-10-09 00:00:05 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserMedals(String)
2025-10-09 00:00:05 [http-nio-5000-exec-3] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 8c056ccb92c567da3fee27c23d4f2f107f203879, page=0, size=20
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] INFO  c.b.controller.FileUploadController - 找到用户: 8c056ccb92c567da3fee27c23d4f2f107f203879, displayName=abc
2025-10-09 00:00:05 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 00:00:05 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:05 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={currentPage=0, pageSize=20, totalPages=1, totalItems=5}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 00:00:05 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:05 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:05 [http-nio-5000-exec-4] WARN  c.b.service.BlockchainSyncService - User not found with wallet address 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:05 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:06 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:06 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MedalQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, medals=MedalQueryResult.Medals( (truncated)...]
2025-10-09 00:00:06 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:10 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/user/0x8c056ccb92c567da3fee27c23d4f2f107f203879?page=0&size=5", parameters={masked}
2025-10-09 00:00:10 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserNfts(String, int, int)
2025-10-09 00:00:10 [http-nio-5000-exec-5] INFO  c.b.controller.BlockchainController - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879, page: 0, size: 5
2025-10-09 00:00:10 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:11 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:00:11 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:11 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:11 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:00:11 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:12 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:00:12 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:00:12 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT pagination result: Total=3, Page=0, PageSize=5, ReturnCount=3
2025-10-09 00:00:12 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:12 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, nfts=[NftQueryResult.NftInfo(toke (truncated)...]
2025-10-09 00:00:12 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:13 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/user/0x8c056ccb92c567da3fee27c23d4f2f107f203879?page=0&size=5", parameters={masked}
2025-10-09 00:00:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserNfts(String, int, int)
2025-10-09 00:00:13 [http-nio-5000-exec-6] INFO  c.b.controller.BlockchainController - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879, page: 0, size: 5
2025-10-09 00:00:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:14 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:00:14 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:14 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:14 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:00:14 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:15 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:00:15 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:00:15 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT pagination result: Total=3, Page=0, PageSize=5, ReturnCount=3
2025-10-09 00:00:15 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:15 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, nfts=[NftQueryResult.NftInfo(toke (truncated)...]
2025-10-09 00:00:15 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=8c056ccb92c567da3fee27c23d4f2f107f203879&page=0&size=20", parameters={masked}
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 00:00:21 [http-nio-5000-exec-8] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 8c056ccb92c567da3fee27c23d4f2f107f203879, page=0, size=20
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] INFO  c.b.controller.FileUploadController - 找到用户: 8c056ccb92c567da3fee27c23d4f2f107f203879, displayName=abc
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={currentPage=0, pageSize=20, totalPages=1, totalItems=5}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 00:00:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:28 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 00:00:28 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 00:00:28 [http-nio-5000-exec-9] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 00:00:28 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 00:00:28 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 00:00:28 [http-nio-5000-exec-9] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807) ~[na:na]
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103) ~[classes/:na]
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55) ~[classes/:na]
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352) ~[spring-aop-6.1.1.jar:6.1.1]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713) ~[spring-aop-6.1.1.jar:6.1.1]
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.1.jar:6.1.1]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.16.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.1.jar:6.1.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2025-10-09 00:00:28 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 00:00:28 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 00:00:28 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 00:00:29 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 00:00:29 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 00:00:29 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 00:00:29 [http-nio-5000-exec-9] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:00:29 [http-nio-5000-exec-9] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 00:00:29 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/stats", parameters={}
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalStats()
2025-10-09 00:00:33 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/all?page=0&size=5", parameters={masked}
2025-10-09 00:00:33 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryAllNfts(int, int)
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Querying all NFTs: page=0, size=5
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Querying all NFTs: page=0, size=5
2025-10-09 00:00:33 [http-nio-5000-exec-7] INFO  c.b.c.MedalRankingController - 获取勋章统计信息
2025-10-09 00:00:33 [http-nio-5000-exec-7] INFO  c.b.service.UserAccountService - 获取勋章统计信息
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        user_accounts ua1_0
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.gold_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.silver_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.bronze_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        1
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={totalUsers=2, highestScore=96, totalBronzeMedals=4, totalGoldMedals=29, totalSilverMedals=3,  (truncated)...]
2025-10-09 00:00:33 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Total NFT supply: 4
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:33 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:33 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:00:33 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:00:34 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:34 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:00:34 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:00:34 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:00:34 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:00:35 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:00:35 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:00:35 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:00:35 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:00:35 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 00:00:35 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 00:00:36 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:00:36 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - All NFTs pagination result: Total=4, Page=0, PageSize=5, ReturnCount=4
2025-10-09 00:00:36 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:00:36 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=all, nfts=[NftQueryResult.NftInfo(tokenId=1, ownerAddress=0x8c056ccb92c567da3 (truncated)...]
2025-10-09 00:00:36 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:02:48 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:02:48 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown initiated...
2025-10-09 00:02:48 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-9 - Shutdown completed.
2025-10-09 00:03:43 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 33348 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 00:03:43 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 00:03:43 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 00:03:43 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-09 00:03:43 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-09 00:03:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 00:03:45 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 131 ms. Found 3 JPA repository interfaces.
2025-10-09 00:03:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 00:03:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 00:03:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 00:03:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 00:03:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3647 ms
2025-10-09 00:03:47 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 00:03:47 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-09 00:03:48 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 00:03:48 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 00:03:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-09 00:03:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7ed6a4e8
2025-10-09 00:03:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-09 00:03:49 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 00:03:49 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 00:03:51 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 00:03:51 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:03:52 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-09 00:03:54 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 00:03:54 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18481
2025-10-09 00:03:54 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985894138487149398528 wei
2025-10-09 00:03:54 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 00:03:54 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 00:03:54 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 00:03:54 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:03:55 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 00:03:55 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 00:03:55 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 00:03:55 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 00:03:55 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 00:03:55 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 00:03:55 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 00:03:55 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 00:03:56 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 00:03:56 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 00:03:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 00:03:56 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 13.81 seconds (process running for 15.157)
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@21da7c38
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@60a0b326
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 00:04:12 [http-nio-5000-exec-1] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 00:04:12 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 00:04:12 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 00:04:13 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 00:04:13 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 00:04:13 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 00:04:13 [http-nio-5000-exec-1] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 00:04:13 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 00:04:13 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:14 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/medals/0x8c056ccb92c567da3fee27c23d4f2f107f203879", parameters={}
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=8c056ccb92c567da3fee27c23d4f2f107f203879&page=0&size=20", parameters={masked}
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 00:04:14 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserMedals(String)
2025-10-09 00:04:14 [http-nio-5000-exec-2] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 8c056ccb92c567da3fee27c23d4f2f107f203879, page=0, size=20
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:14 [http-nio-5000-exec-2] INFO  c.b.controller.FileUploadController - 找到用户: 8c056ccb92c567da3fee27c23d4f2f107f203879, displayName=abc
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:04:14 [http-nio-5000-exec-3] INFO  c.b.controller.BlockchainController - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:14 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:14 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={totalPages=1, totalItems=5, currentPage=0, pageSize=20}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 00:04:14 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:15 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:15 [http-nio-5000-exec-3] WARN  c.b.service.BlockchainSyncService - User not found with wallet address 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:15 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:15 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:15 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MedalQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, medals=MedalQueryResult.Medals( (truncated)...]
2025-10-09 00:04:15 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:16 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/user/0x8c056ccb92c567da3fee27c23d4f2f107f203879?page=0&size=5", parameters={masked}
2025-10-09 00:04:16 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserNfts(String, int, int)
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.controller.BlockchainController - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879, page: 0, size: 5
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:17 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:17 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:04:17 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:04:18 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - NFT pagination result: Total=3, Page=0, PageSize=5, ReturnCount=3
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, nfts=[NftQueryResult.NftInfo(toke (truncated)...]
2025-10-09 00:04:18 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/stats", parameters={}
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalStats()
2025-10-09 00:04:20 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/all?page=0&size=5", parameters={masked}
2025-10-09 00:04:20 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryAllNfts(int, int)
2025-10-09 00:04:20 [http-nio-5000-exec-6] INFO  c.b.controller.BlockchainController - Querying all NFTs: page=0, size=5
2025-10-09 00:04:20 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying all NFTs: page=0, size=5
2025-10-09 00:04:20 [http-nio-5000-exec-4] INFO  c.b.c.MedalRankingController - 获取勋章统计信息
2025-10-09 00:04:20 [http-nio-5000-exec-4] INFO  c.b.service.UserAccountService - 获取勋章统计信息
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        user_accounts ua1_0
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.gold_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.silver_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.bronze_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        1
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={totalUsers=2, highestScore=96, totalBronzeMedals=4, totalGoldMedals=29, totalSilverMedals=3,  (truncated)...]
2025-10-09 00:04:20 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:20 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Total NFT supply: 4
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:21 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:04:21 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:04:21 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:21 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:21 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:04:21 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:04:22 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:22 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:22 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:04:22 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:04:22 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:23 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - All NFTs pagination result: Total=4, Page=0, PageSize=5, ReturnCount=4
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=all, nfts=[NftQueryResult.NftInfo(tokenId=1, ownerAddress=0x8c056ccb92c567da3 (truncated)...]
2025-10-09 00:04:23 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:04:49 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/all?page=0&size=5", parameters={masked}
2025-10-09 00:04:49 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryAllNfts(int, int)
2025-10-09 00:04:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Querying all NFTs: page=0, size=5
2025-10-09 00:04:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Querying all NFTs: page=0, size=5
2025-10-09 00:04:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Total NFT supply: 4
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:50 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 00:04:50 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 00:04:50 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:50 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 00:04:50 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 00:04:50 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 00:04:51 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:51 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 00:04:51 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 00:04:51 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 00:04:52 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - All NFTs pagination result: Total=4, Page=0, PageSize=5, ReturnCount=4
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=all, nfts=[NftQueryResult.NftInfo(tokenId=1, ownerAddress=0x8c056ccb92c567da3 (truncated)...]
2025-10-09 00:04:52 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 00:05:42 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 25 class path changes (0 additions, 0 deletions, 25 modifications)
2025-10-09 00:05:42 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:05:42 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-09 00:05:42 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-09 00:05:42 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 33348 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 00:05:42 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 00:05:42 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 00:05:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 00:05:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 3 JPA repository interfaces.
2025-10-09 00:05:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 00:05:44 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 00:05:44 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 00:05:44 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 00:05:44 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1412 ms
2025-10-09 00:05:44 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 00:05:44 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 00:05:44 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 00:05:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-10-09 00:05:44 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@47b7ef53
2025-10-09 00:05:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-10-09 00:05:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 00:05:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 00:05:44 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 00:05:44 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:05:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 00:05:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18507
2025-10-09 00:05:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985895122283439396352 wei
2025-10-09 00:05:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 00:05:45 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 00:05:45 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 00:05:45 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:05:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 00:05:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 00:05:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 00:05:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 00:05:46 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 00:05:46 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 00:05:46 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 00:05:46 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 00:05:46 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 00:05:46 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 00:05:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 00:05:46 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 3.845 seconds (process running for 125.254)
2025-10-09 00:05:46 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 00:06:12 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 25 class path changes (0 additions, 0 deletions, 25 modifications)
2025-10-09 00:06:12 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:06:12 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-10-09 00:06:12 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-10-09 00:06:12 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 33348 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 00:06:12 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 00:06:12 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 00:06:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 00:06:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 37 ms. Found 3 JPA repository interfaces.
2025-10-09 00:06:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 00:06:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 00:06:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 00:06:14 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 00:06:14 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1249 ms
2025-10-09 00:06:14 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 00:06:14 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 00:06:14 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 00:06:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-10-09 00:06:14 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2d14bf97
2025-10-09 00:06:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-10-09 00:06:14 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 00:06:14 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 00:06:14 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 00:06:14 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:06:14 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 00:06:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18507
2025-10-09 00:06:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985895122283439396352 wei
2025-10-09 00:06:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 00:06:15 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 00:06:15 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 00:06:15 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:06:15 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 00:06:15 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 00:06:15 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 00:06:15 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 00:06:15 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 00:06:15 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 00:06:15 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 00:06:15 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 00:06:15 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 00:06:16 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 00:06:16 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 00:06:16 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 3.384 seconds (process running for 154.761)
2025-10-09 00:06:16 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 00:06:37 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 25 class path changes (0 additions, 0 deletions, 25 modifications)
2025-10-09 00:06:38 [Thread-14] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:06:38 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-10-09 00:06:38 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-10-09 00:06:38 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 33348 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 00:06:38 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 00:06:38 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 00:06:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 00:06:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 33 ms. Found 3 JPA repository interfaces.
2025-10-09 00:06:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 00:06:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 00:06:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 00:06:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 00:06:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 804 ms
2025-10-09 00:06:39 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 00:06:39 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 00:06:39 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 00:06:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-10-09 00:06:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4154efbc
2025-10-09 00:06:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-10-09 00:06:39 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 00:06:39 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 00:06:39 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 00:06:39 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:06:39 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 00:06:39 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18507
2025-10-09 00:06:40 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985895122283439396352 wei
2025-10-09 00:06:40 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 00:06:40 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 00:06:40 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 00:06:40 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 00:06:40 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 00:06:40 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 00:06:40 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 00:06:40 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 00:06:40 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 00:06:40 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 00:06:40 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 00:06:40 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 00:06:40 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 00:06:40 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 00:06:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 00:06:40 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.618 seconds (process running for 179.421)
2025-10-09 00:06:40 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 00:07:13 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 00:07:13 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-10-09 00:07:13 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-10-09 08:22:39 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 32472 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:22:39 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:22:39 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:22:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-09 08:22:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-09 08:22:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:22:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 117 ms. Found 3 JPA repository interfaces.
2025-10-09 08:22:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:22:44 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:22:44 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:22:44 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:22:44 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4352 ms
2025-10-09 08:22:44 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:22:44 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-09 08:22:44 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:22:45 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:22:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-09 08:22:45 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@288a0ecd
2025-10-09 08:22:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-09 08:22:45 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:22:45 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:22:47 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:22:47 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:22:48 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-09 08:22:50 [restartedMain] ERROR c.b.config.BlockchainConfig - Failed to connect to BrokerChain client: Failed to connect to /127.0.0.1:42496
2025-10-09 08:22:50 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:22:50 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:22:50 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:22:50 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:22:50 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:22:50 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:22:50 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:22:50 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:22:50 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:22:51 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:22:51 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:22:51 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:22:51 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:22:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:22:51 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 12.852 seconds (process running for 14.31)
2025-10-09 08:34:56 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:34:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-09 08:34:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-09 08:35:12 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 1768 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:35:12 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:35:12 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:35:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-09 08:35:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-09 08:35:14 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:35:14 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 125 ms. Found 3 JPA repository interfaces.
2025-10-09 08:35:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:35:15 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:35:16 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:35:16 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:35:16 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3433 ms
2025-10-09 08:35:16 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:35:16 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-09 08:35:16 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:35:17 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:35:17 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-09 08:35:17 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@288a0ecd
2025-10-09 08:35:17 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-09 08:35:17 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:35:17 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:35:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:35:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:35:20 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-09 08:35:21 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:35:22 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18507
2025-10-09 08:35:22 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985895295894549395968 wei
2025-10-09 08:35:22 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:35:22 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:35:22 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:35:22 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:35:22 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:35:22 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:35:22 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:35:22 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:35:22 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:35:23 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:35:23 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:35:23 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:35:23 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:35:23 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:35:23 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:35:23 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 12.085 seconds (process running for 13.333)
2025-10-09 08:37:01 [http-nio-5000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 08:37:01 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@505549a5
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@8157e9e
2025-10-09 08:37:01 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 08:37:01 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-10-09 08:37:02 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:37:02 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:37:02 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:37:02 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:37:02 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:37:02 [http-nio-5000-exec-1] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:37:02 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:37:02 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:37:02 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:37:03 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 08:37:03 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:37:03 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:37:03 [http-nio-5000-exec-1] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:37:03 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:37:03 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=8c056ccb92c567da3fee27c23d4f2f107f203879&page=0&size=20", parameters={masked}
2025-10-09 08:37:05 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/medals/0x8c056ccb92c567da3fee27c23d4f2f107f203879", parameters={}
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 08:37:05 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserMedals(String)
2025-10-09 08:37:05 [http-nio-5000-exec-3] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 8c056ccb92c567da3fee27c23d4f2f107f203879, page=0, size=20
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:05 [http-nio-5000-exec-3] INFO  c.b.controller.FileUploadController - 找到用户: 8c056ccb92c567da3fee27c23d4f2f107f203879, displayName=abc
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:37:05 [http-nio-5000-exec-2] INFO  c.b.controller.BlockchainController - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:05 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:05 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={totalPages=1, pageSize=20, currentPage=0, totalItems=5}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 08:37:05 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:05 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:05 [http-nio-5000-exec-2] WARN  c.b.service.BlockchainSyncService - User not found with wallet address 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:05 [http-nio-5000-exec-2] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:06 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:06 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MedalQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, medals=MedalQueryResult.Medals( (truncated)...]
2025-10-09 08:37:06 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:07 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/user/0x8c056ccb92c567da3fee27c23d4f2f107f203879?page=0&size=5", parameters={masked}
2025-10-09 08:37:07 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserNfts(String, int, int)
2025-10-09 08:37:07 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879, page: 0, size: 5
2025-10-09 08:37:07 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying NFTs for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 08:37:08 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT pagination result: Total=3, Page=0, PageSize=5, ReturnCount=3
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, nfts=[NftQueryResult.NftInfo(toke (truncated)...]
2025-10-09 08:37:08 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/stats", parameters={}
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalStats()
2025-10-09 08:37:10 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/all?page=0&size=5", parameters={masked}
2025-10-09 08:37:10 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryAllNfts(int, int)
2025-10-09 08:37:10 [http-nio-5000-exec-6] INFO  c.b.controller.BlockchainController - Querying all NFTs: page=0, size=5
2025-10-09 08:37:10 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying all NFTs: page=0, size=5
2025-10-09 08:37:10 [http-nio-5000-exec-8] INFO  c.b.c.MedalRankingController - 获取勋章统计信息
2025-10-09 08:37:10 [http-nio-5000-exec-8] INFO  c.b.service.UserAccountService - 获取勋章统计信息
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        user_accounts ua1_0
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.gold_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.silver_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.bronze_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        1
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={totalUsers=2, highestScore=96, totalBronzeMedals=4, totalGoldMedals=29, totalSilverMedals=3,  (truncated)...]
2025-10-09 08:37:10 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:10 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Total NFT supply: 4
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 未找到用户: 地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT #1 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (匿名用户)
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=1, ownerDisplayName=匿名用户
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:11 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 08:37:11 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 08:37:12 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:12 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:12 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 未找到用户: 地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT #2 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (匿名用户)
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=2, ownerDisplayName=匿名用户
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 08:37:12 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 08:37:12 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 08:37:12 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 未找到用户: 地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT #3 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (匿名用户)
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=3, ownerDisplayName=匿名用户
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - 未找到用户: 地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT #4 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (匿名用户)
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=4, ownerDisplayName=匿名用户
2025-10-09 08:37:13 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - All NFTs pagination result: Total=4, Page=0, PageSize=5, ReturnCount=4
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=all, nfts=[NftQueryResult.NftInfo(tokenId=1, ownerAddress=0x8c056ccb92c567da3 (truncated)...]
2025-10-09 08:37:13 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:37:50 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:37:50 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:37:50 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:37:50 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:37:50 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:37:51 [http-nio-5000-exec-1] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 0, Bronze: 1
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:37:51 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:37:51 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:18 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:44:18 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:44:18 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:44:18 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 获取待审核文件列表: page=1, limit=10
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.upload_time desc 
    limit
        ?, ?
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:18 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 成功获取1条待审核文件
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=1, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=a6ab9f57 (truncated)...]
2025-10-09 08:44:18 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/admin/approved-users?page=1&limit=10", parameters={masked}
2025-10-09 08:44:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getApprovedUsers(int, int)
2025-10-09 08:44:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/approved-users?page=1&limit=10", parameters={masked}
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getApprovedUsers(int, int)
2025-10-09 08:44:21 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 获取已审核文件列表: page=1, limit=10
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.audit_time desc 
    limit
        ?, ?
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:21 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 成功获取5条已审核文件
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=5, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=b4358e6a (truncated)...]
2025-10-09 08:44:21 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:23 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/admin/material-detail/25", parameters={}
2025-10-09 08:44:23 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:44:23 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:44:23 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:44:23 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:44:23 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:44:23 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/nft-image/9b435b5932754052a871e1db0e931e38_1759925535304.jpg", parameters={}
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getNftImage(String)
2025-10-09 08:44:24 [http-nio-5000-exec-9] INFO  c.b.controller.AdminController - 获取NFT图片: 9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.image_name=?
2025-10-09 08:44:24 [http-nio-5000-exec-9] INFO  c.b.controller.AdminController - NFT图片访问成功: 9b435b5932754052a871e1db0e931e38_1759925535304.jpg (image/jpeg)
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Found 'Content-Type:image/jpeg' in response
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [URL [file:///D:/brokerwallet/BrokerWallet-backend/uploads/nft-images/users/11/9b435b5932754052a871e1 (truncated)...]
2025-10-09 08:44:24 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:31 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/admin/approve-representative-work", parameters={}
2025-10-09 08:44:31 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#approveRepresentativeWork(Map)
2025-10-09 08:44:31 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/approve-representative-work", parameters={}
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#approveRepresentativeWork(Map)
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{userId=25, approved=true}]
2025-10-09 08:44:31 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 更新代表作展示审批: userId=25, approved=true
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{success=false, message=用户不存在}]
2025-10-09 08:44:31 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-10-09 08:44:31 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/admin/review", parameters={}
2025-10-09 08:44:31 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#reviewUser(Map)
2025-10-09 08:44:31 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:31 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/review", parameters={}
2025-10-09 08:44:31 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#reviewUser(Map)
2025-10-09 08:44:31 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{username=efg, approve=1, firstnum=0, secondnum=1, thirdnum=0, proofFileId=25}]
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 审核用户: username=efg, approve=1, gold=0, silver=1, bronze=0, proofFileId=25
2025-10-09 08:44:31 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.display_name=?
2025-10-09 08:44:31 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 开始向区块链发放勋章: 用户=38e1ef2285bec94b2602f239f2471004ebf120b4, 金牌=0, 银牌=1, 铜牌=0
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Distributing medals to: 38e1ef2285bec94b2602f239f2471004ebf120b4 (wallet signing)
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Checking distributor permission for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Distributor permission response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Has distributor permission: true
2025-10-09 08:44:31 [http-nio-5000-exec-8] WARN  c.b.service.BlockchainService - Failed to get nonce, using default value 0: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Current gas price: 1000000000 wei
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction info:
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - To: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Nonce: 0
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Gas Limit: 300000
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Value: 0
2025-10-09 08:44:31 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Data: 0x6cd7d05700000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction sent to blockchain, hash: 0xd48fad564be804268d801ee6b92a143331efc982cd2f89689ccfbb906448df71
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0xd48fad564be804268d801ee6b92a143331efc982cd2f89689ccfbb906448df71
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 区块链勋章发放成功: txHash=0xd48fad564be804268d801ee6b92a143331efc982cd2f89689ccfbb906448df71
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:32 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:44:32 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainSyncService - Medal data sync completed for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:32 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 区块链数据同步成功
2025-10-09 08:44:32 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:44:33 [http-nio-5000-exec-8] WARN  c.b.controller.AdminController - 文件ID=25不属于用户efg或已审核
2025-10-09 08:44:33 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 审核成功: 用户efg获得金牌0、银牌1、铜牌0
2025-10-09 08:44:33 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:33 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{code=1, success=true, message=审核通过！为用户 efg 分配了 0 金牌、1 银牌、0 铜牌}]
2025-10-09 08:44:33 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:33 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - OPTIONS "/api/blockchain/nft/mint", parameters={}
2025-10-09 08:44:33 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#mintNft(NftMintRequest)
2025-10-09 08:44:33 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:33 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/blockchain/nft/mint", parameters={}
2025-10-09 08:44:33 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#mintNft(NftMintRequest)
2025-10-09 08:44:33 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [NftMintRequest(ownerAddress=38e1ef2285bec94b2602f239f2471004ebf120b4, name=efg的贡献证明, description=efg (truncated)...]
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - === NFT Minting Request ===
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Owner Address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - NFT Name: efg的贡献证明
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Description: efg的贡献的NFT纪念证书
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Image Data Length: 187
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Image Data Preview: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"ima
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minting NFT for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Normalized address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Checking NFT Minting Permission ===
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Checking address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT contract address: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Encoded function: 0x92133cde0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Permission check response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Mint Permission Result: ✅ HAS PERMISSION ===
2025-10-09 08:44:33 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Querying NFT mint fee
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT mint fee: 0 wei
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Contract mint fee: 0 wei (0 ETH)
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Encoded function data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Nonce response raw: null
2025-10-09 08:44:34 [http-nio-5000-exec-7] ERROR c.b.service.BlockchainService - Exception while getting nonce: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas price response raw: 0x3b9aca00
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Gas Limit Setting (Optimized for Path Storage) ===
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Set Gas Limit: 1000000 (optimized for JSON metadata)
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Estimated gas for ~200 bytes JSON: ~500K, using 1M for safety
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction details:
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - To: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Nonce: 0x0
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Price: 0x3b9aca00
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Limit: 1000000
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Value: 0x0
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction sent successfully, Hash: 0x84aa6de2c6d4f756167e0cefb171421b3ba0e587dd1649174cae22ae46fb3592
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0x84aa6de2c6d4f756167e0cefb171421b3ba0e587dd1649174cae22ae46fb3592
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Parsed Token ID from receipt: 0
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - === NFT Minting Response ===
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Success: true
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Message: NFT minted successfully
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Transaction Hash: 0x84aa6de2c6d4f756167e0cefb171421b3ba0e587dd1649174cae22ae46fb3592
2025-10-09 08:44:34 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Token ID: 0
2025-10-09 08:44:34 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:34 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftMintResponse(success=true, message=NFT minted successfully, tokenId=0, imageHash=blockchain://0,  (truncated)...]
2025-10-09 08:44:34 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:44:37 [http-nio-5000-exec-9] INFO  c.b.controller.AdminController - 获取待审核文件列表: page=1, limit=10
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.upload_time desc 
    limit
        ?, ?
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:44:37 [http-nio-5000-exec-9] INFO  c.b.controller.AdminController - 成功获取1条待审核文件
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=1, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=a6ab9f57 (truncated)...]
2025-10-09 08:44:37 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:44:46 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:44:46 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:44:46 [http-nio-5000-exec-10] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:44:46 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:44:46 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:44:46 [http-nio-5000-exec-10] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:44:46 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:44:46 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:44:46 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:44:47 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 1, Bronze: 1
2025-10-09 08:44:47 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:44:47 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:44:47 [http-nio-5000-exec-10] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:44:47 [http-nio-5000-exec-10] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:44:47 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/approved-users?page=1&limit=10", parameters={masked}
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getApprovedUsers(int, int)
2025-10-09 08:45:19 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - 获取已审核文件列表: page=1, limit=10
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.audit_time desc 
    limit
        ?, ?
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:45:19 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - 成功获取5条已审核文件
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=5, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=b4358e6a (truncated)...]
2025-10-09 08:45:19 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:45:19 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:45:19 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:45:19 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:45:19 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:45:56 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:45:56 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:45:56 [http-nio-5000-exec-6] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:45:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:45:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:45:56 [http-nio-5000-exec-6] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:45:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:45:56 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:45:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:45:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 0, Silver: 1, Bronze: 1
2025-10-09 08:45:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:45:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:45:57 [http-nio-5000-exec-6] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:45:57 [http-nio-5000-exec-6] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:45:57 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:48:52 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:48:52 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:48:52 [http-nio-5000-exec-5] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:48:52 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:49:06 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 08:49:06 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:06 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-09 08:49:06 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-09 08:49:06 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 1768 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:49:06 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:49:06 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:49:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:49:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 3 JPA repository interfaces.
2025-10-09 08:49:07 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:49:07 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:49:07 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:49:07 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:49:07 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1155 ms
2025-10-09 08:49:07 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:49:07 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:49:07 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:49:07 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-10-09 08:49:07 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fe3703b
2025-10-09 08:49:07 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-10-09 08:49:07 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:49:07 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:49:08 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:49:08 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:08 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:49:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18536
2025-10-09 08:49:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985884289890829390336 wei
2025-10-09 08:49:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:49:09 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:49:09 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:49:09 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:49:09 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:49:09 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:49:09 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:49:09 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:49:09 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:49:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:49:10 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:49:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:49:10 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:49:10 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:49:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:49:10 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 3.938 seconds (process running for 839.983)
2025-10-09 08:49:10 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 08:49:17 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 08:49:17 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:17 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-10-09 08:49:17 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-10-09 08:49:18 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 1768 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:49:18 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:49:18 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:49:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:49:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 30 ms. Found 3 JPA repository interfaces.
2025-10-09 08:49:18 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:49:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:49:18 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:49:18 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:49:18 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 699 ms
2025-10-09 08:49:18 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:49:18 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:49:18 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:49:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-10-09 08:49:18 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@eba210b
2025-10-09 08:49:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-10-09 08:49:18 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:49:18 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:49:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:49:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:19 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:49:19 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18536
2025-10-09 08:49:20 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985884289890829390336 wei
2025-10-09 08:49:20 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:49:20 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:49:20 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:49:20 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:49:20 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:49:20 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:49:20 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:49:20 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:49:20 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:49:20 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:49:20 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:49:20 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:49:20 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:49:20 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:49:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:49:20 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.656 seconds (process running for 850.328)
2025-10-09 08:49:20 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 08:49:43 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 08:49:43 [Thread-14] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:43 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-10-09 08:49:43 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-10-09 08:49:43 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 1768 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:49:43 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:49:43 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:49:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:49:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 3 JPA repository interfaces.
2025-10-09 08:49:44 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:49:44 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:49:44 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:49:44 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:49:44 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 843 ms
2025-10-09 08:49:44 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:49:44 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:49:44 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:49:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-10-09 08:49:44 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@576bdb68
2025-10-09 08:49:44 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-10-09 08:49:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:49:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:49:44 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:49:45 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:49:45 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18536
2025-10-09 08:49:46 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985884289890829390336 wei
2025-10-09 08:49:46 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:49:46 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:49:46 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:49:46 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:49:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:49:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:49:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:49:46 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:49:46 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:49:46 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:49:46 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:49:46 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:49:46 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:49:46 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:49:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:49:46 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.815 seconds (process running for 876.228)
2025-10-09 08:49:46 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 08:49:51 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:49:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-10-09 08:49:51 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-10-09 08:50:06 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 35780 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:50:06 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:50:06 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:50:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-09 08:50:06 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-09 08:50:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:50:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 131 ms. Found 3 JPA repository interfaces.
2025-10-09 08:50:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:50:09 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:50:09 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:50:09 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:50:09 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3317 ms
2025-10-09 08:50:09 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:50:10 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-09 08:50:10 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:50:10 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:50:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-09 08:50:11 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7f4dee24
2025-10-09 08:50:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-09 08:50:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:50:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:50:12 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:50:12 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:50:13 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-09 08:50:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:50:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18536
2025-10-09 08:50:16 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985884289890829390336 wei
2025-10-09 08:50:16 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:50:16 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:50:16 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:50:16 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:50:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:50:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:50:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:50:16 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:50:16 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:50:17 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:50:17 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:50:17 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:50:17 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:50:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:50:17 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 12.288 seconds (process running for 13.637)
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2eb2bfb3
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@59f51dcd
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 11 ms
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/medals/0x8c056ccb92c567da3fee27c23d4f2f107f203879", parameters={}
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=8c056ccb92c567da3fee27c23d4f2f107f203879&page=0&size=20", parameters={masked}
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 08:50:47 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserMedals(String)
2025-10-09 08:50:47 [http-nio-5000-exec-1] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 8c056ccb92c567da3fee27c23d4f2f107f203879, page=0, size=20
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  c.b.controller.BlockchainController - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:47 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] INFO  c.b.controller.FileUploadController - 找到用户: 8c056ccb92c567da3fee27c23d4f2f107f203879, displayName=abc
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={totalPages=1, pageSize=20, currentPage=0, totalItems=5}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 08:50:47 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:50:48 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:50:48 [http-nio-5000-exec-3] WARN  c.b.service.BlockchainSyncService - User not found with wallet address 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:48 [http-nio-5000-exec-3] INFO  c.b.service.BlockchainService - Querying medals for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:48 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:50:48 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MedalQueryResult(address=0x8c056ccb92c567da3fee27c23d4f2f107f203879, medals=MedalQueryResult.Medals( (truncated)...]
2025-10-09 08:50:48 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:50:48 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:50:48 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:50:48 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:50:48 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:50:54 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/upload/user/submissions?walletAddress=38e1ef2285bec94b2602f239f2471004ebf120b4&page=0&size=20", parameters={masked}
2025-10-09 08:50:54 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/medals/0x38e1ef2285bec94b2602f239f2471004ebf120b4", parameters={}
2025-10-09 08:50:54 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.FileUploadController#getUserSubmissions(String, int, int)
2025-10-09 08:50:54 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserMedals(String)
2025-10-09 08:50:54 [http-nio-5000-exec-5] INFO  c.b.controller.FileUploadController - 获取用户提交历史: 38e1ef2285bec94b2602f239f2471004ebf120b4, page=0, size=20
2025-10-09 08:50:54 [http-nio-5000-exec-9] INFO  c.b.controller.BlockchainController - Querying medals for address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:54 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:54 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainService - Querying medals for address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:54 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:50:54 [http-nio-5000-exec-5] INFO  c.b.controller.FileUploadController - 找到用户: 38e1ef2285bec94b2602f239f2471004ebf120b4, displayName=efg
2025-10-09 08:50:54 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.user_account_id=? 
    order by
        pf1_0.upload_time desc
2025-10-09 08:50:55 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.proof_file_id=?
2025-10-09 08:50:55 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:50:55 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{pagination={totalPages=1, pageSize=20, currentPage=0, totalItems=1}, data=[{auditStatusDesc=审核通过, f (truncated)...]
2025-10-09 08:50:55 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:50:55 [http-nio-5000-exec-9] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:50:55 [http-nio-5000-exec-9] WARN  c.b.service.BlockchainSyncService - User not found with wallet address 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:55 [http-nio-5000-exec-9] INFO  c.b.service.BlockchainService - Querying medals for address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:55 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:50:55 [http-nio-5000-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [MedalQueryResult(address=0x38e1ef2285bec94b2602f239f2471004ebf120b4, medals=MedalQueryResult.Medals( (truncated)...]
2025-10-09 08:50:55 [http-nio-5000-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:50:56 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/user/0x38e1ef2285bec94b2602f239f2471004ebf120b4?page=0&size=5", parameters={masked}
2025-10-09 08:50:56 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryUserNfts(String, int, int)
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.controller.BlockchainController - Querying NFTs for address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4, page: 0, size: 5
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Querying NFTs for address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:50:56 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:50:56 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 08:50:56 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 5: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c66d381d0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Mint time: 1759970670621
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 08:50:57 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759970670621
2025-10-09 08:50:57 [http-nio-5000-exec-6] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759970670621 to 2025-10-09 08:44:30
2025-10-09 08:50:57 [http-nio-5000-exec-6] INFO  c.b.service.BlockchainService - NFT pagination result: Total=2, Page=0, PageSize=5, ReturnCount=2
2025-10-09 08:50:57 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:50:57 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=0x38e1ef2285bec94b2602f239f2471004ebf120b4, nfts=[NftQueryResult.NftInfo(toke (truncated)...]
2025-10-09 08:50:57 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/approve-representative-work", parameters={}
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#approveRepresentativeWork(Map)
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{userId=25, approved=true}]
2025-10-09 08:51:12 [http-nio-5000-exec-7] INFO  c.b.controller.AdminController - 📥 收到代表作审批请求: {userId=25, approved=true}
2025-10-09 08:51:12 [http-nio-5000-exec-7] INFO  c.b.controller.AdminController - 🔍 更新代表作展示审批: userId=25, approved=true
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:51:12 [http-nio-5000-exec-7] ERROR c.b.controller.AdminController - ❌ 用户不存在: userId=25
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{success=false, message=用户不存在}]
2025-10-09 08:51:12 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-10-09 08:51:12 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/review", parameters={}
2025-10-09 08:51:12 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#reviewUser(Map)
2025-10-09 08:51:12 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{username=efg, approve=1, firstnum=1, secondnum=0, thirdnum=0, proofFileId=25}]
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 审核用户: username=efg, approve=1, gold=1, silver=0, bronze=0, proofFileId=25
2025-10-09 08:51:12 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.display_name=?
2025-10-09 08:51:12 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 开始向区块链发放勋章: 用户=38e1ef2285bec94b2602f239f2471004ebf120b4, 金牌=1, 银牌=0, 铜牌=0
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Distributing medals to: 38e1ef2285bec94b2602f239f2471004ebf120b4 (wallet signing)
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Checking distributor permission for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Distributor permission response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Has distributor permission: true
2025-10-09 08:51:12 [http-nio-5000-exec-8] WARN  c.b.service.BlockchainService - Failed to get nonce, using default value 0: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Current gas price: 1000000000 wei
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction info:
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - To: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Nonce: 0
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Gas Limit: 300000
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Value: 0
2025-10-09 08:51:12 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Data: 0x6cd7d05700000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b4000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction sent to blockchain, hash: 0x27d28ee3767ffcadf9f3e950c8bbf86f847cd7fb1f10ed8699d164f262b31a21
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0x27d28ee3767ffcadf9f3e950c8bbf86f847cd7fb1f10ed8699d164f262b31a21
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 区块链勋章发放成功: txHash=0x27d28ee3767ffcadf9f3e950c8bbf86f847cd7fb1f10ed8699d164f262b31a21
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.service.BlockchainSyncService - Medal data sync completed for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 区块链数据同步成功
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:51:13 [http-nio-5000-exec-8] WARN  c.b.controller.AdminController - 文件ID=25不属于用户efg或已审核
2025-10-09 08:51:13 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 审核成功: 用户efg获得金牌1、银牌0、铜牌0
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{code=1, success=true, message=审核通过！为用户 efg 分配了 1 金牌、0 银牌、0 铜牌}]
2025-10-09 08:51:13 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:51:13 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/blockchain/nft/mint", parameters={}
2025-10-09 08:51:13 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#mintNft(NftMintRequest)
2025-10-09 08:51:13 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [NftMintRequest(ownerAddress=38e1ef2285bec94b2602f239f2471004ebf120b4, name=efg的贡献证明, description=efg (truncated)...]
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - === NFT Minting Request ===
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Owner Address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - NFT Name: efg的贡献证明
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Description: efg的贡献的NFT纪念证书
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Image Data Length: 187
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Image Data Preview: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"ima
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Minting NFT for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Normalized address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - === Checking NFT Minting Permission ===
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Checking address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT contract address: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Encoded function: 0x92133cde0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Permission check response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - === Mint Permission Result: ✅ HAS PERMISSION ===
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying NFT mint fee
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - NFT mint fee: 0 wei
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Contract mint fee: 0 wei (0 ETH)
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Encoded function data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Nonce response raw: null
2025-10-09 08:51:14 [http-nio-5000-exec-4] ERROR c.b.service.BlockchainService - Exception while getting nonce: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas price response raw: 0x3b9aca00
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - === Gas Limit Setting (Optimized for Path Storage) ===
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Set Gas Limit: 1000000 (optimized for JSON metadata)
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Estimated gas for ~200 bytes JSON: ~500K, using 1M for safety
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction details:
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - To: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Nonce: 0x0
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Price: 0x3b9aca00
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Limit: 1000000
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Value: 0x0
2025-10-09 08:51:14 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction sent successfully, Hash: 0xa678a864249c3298a055c3aca5b2d486e6c4929030a8038a9cdecdca7d2a5cce
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0xa678a864249c3298a055c3aca5b2d486e6c4929030a8038a9cdecdca7d2a5cce
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Parsed Token ID from receipt: 0
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - === NFT Minting Response ===
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Success: true
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Message: NFT minted successfully
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Transaction Hash: 0xa678a864249c3298a055c3aca5b2d486e6c4929030a8038a9cdecdca7d2a5cce
2025-10-09 08:51:15 [http-nio-5000-exec-4] INFO  c.b.controller.BlockchainController - Token ID: 0
2025-10-09 08:51:15 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:51:15 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftMintResponse(success=true, message=NFT minted successfully, tokenId=0, imageHash=blockchain://0,  (truncated)...]
2025-10-09 08:51:15 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:51:18 [http-nio-5000-exec-10] INFO  c.b.controller.AdminController - 获取待审核文件列表: page=1, limit=10
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.upload_time desc 
    limit
        ?, ?
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:51:18 [http-nio-5000-exec-10] INFO  c.b.controller.AdminController - 成功获取1条待审核文件
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=1, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=a6ab9f57 (truncated)...]
2025-10-09 08:51:18 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:51:25 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:51:25 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:51:25 [http-nio-5000-exec-1] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:51:25 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:51:25 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:51:25 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:51:25 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 1, Silver: 1, Bronze: 1
2025-10-09 08:51:26 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:51:26 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:51:26 [http-nio-5000-exec-1] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:51:26 [http-nio-5000-exec-1] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:51:26 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/approved-users?page=1&limit=10", parameters={masked}
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getApprovedUsers(int, int)
2025-10-09 08:53:13 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 获取已审核文件列表: page=1, limit=10
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.audit_time desc 
    limit
        ?, ?
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:53:13 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 成功获取5条已审核文件
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=5, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=b4358e6a (truncated)...]
2025-10-09 08:53:13 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:53:14 [http-nio-5000-exec-7] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:53:14 [http-nio-5000-exec-7] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:53:14 [http-nio-5000-exec-7] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:53:14 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/approve-representative-work", parameters={}
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#approveRepresentativeWork(Map)
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{userId=25, approved=true}]
2025-10-09 08:53:21 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 📥 收到代表作审批请求: {userId=25, approved=true}
2025-10-09 08:53:21 [http-nio-5000-exec-8] INFO  c.b.controller.AdminController - 🔍 更新代表作展示审批: userId=25, approved=true
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:53:21 [http-nio-5000-exec-8] ERROR c.b.controller.AdminController - ❌ 用户不存在: userId=25
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{success=false, message=用户不存在}]
2025-10-09 08:53:21 [http-nio-5000-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 400 BAD_REQUEST
2025-10-09 08:53:21 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/review", parameters={}
2025-10-09 08:53:21 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#reviewUser(Map)
2025-10-09 08:53:21 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{username=efg, approve=1, firstnum=0, secondnum=0, thirdnum=1, proofFileId=25}]
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 审核用户: username=efg, approve=1, gold=0, silver=0, bronze=1, proofFileId=25
2025-10-09 08:53:21 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.display_name=?
2025-10-09 08:53:21 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 开始向区块链发放勋章: 用户=38e1ef2285bec94b2602f239f2471004ebf120b4, 金牌=0, 银牌=0, 铜牌=1
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Distributing medals to: 38e1ef2285bec94b2602f239f2471004ebf120b4 (wallet signing)
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Checking distributor permission for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Distributor permission response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:53:21 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Has distributor permission: true
2025-10-09 08:53:22 [http-nio-5000-exec-4] WARN  c.b.service.BlockchainService - Failed to get nonce, using default value 0: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Current gas price: 1000000000 wei
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction info:
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - To: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Nonce: 0
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Limit: 300000
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Value: 0
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Data: 0x6cd7d05700000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction sent to blockchain, hash: 0xff549dcb1cb9f9d47184fecf4df1931a43e3121ed9e79e11ba70d4a0163f237f
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0xff549dcb1cb9f9d47184fecf4df1931a43e3121ed9e79e11ba70d4a0163f237f
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 区块链勋章发放成功: txHash=0xff549dcb1cb9f9d47184fecf4df1931a43e3121ed9e79e11ba70d4a0163f237f
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:22 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:53:23 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainSyncService - Medal data sync completed for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:23 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 区块链数据同步成功
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:53:23 [http-nio-5000-exec-4] WARN  c.b.controller.AdminController - 文件ID=25不属于用户efg或已审核
2025-10-09 08:53:23 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 审核成功: 用户efg获得金牌0、银牌0、铜牌1
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{code=1, success=true, message=审核通过！为用户 efg 分配了 0 金牌、0 银牌、1 铜牌}]
2025-10-09 08:53:23 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:53:23 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/blockchain/nft/mint", parameters={}
2025-10-09 08:53:23 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#mintNft(NftMintRequest)
2025-10-09 08:53:23 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [NftMintRequest(ownerAddress=38e1ef2285bec94b2602f239f2471004ebf120b4, name=efg的贡献证明, description=efg (truncated)...]
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - === NFT Minting Request ===
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Owner Address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - NFT Name: efg的贡献证明
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Description: efg的贡献的NFT纪念证书
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Image Data Length: 187
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Image Data Preview: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"ima
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Minting NFT for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Normalized address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - === Checking NFT Minting Permission ===
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Checking address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT contract address: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Encoded function: 0x92133cde0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Permission check response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - === Mint Permission Result: ✅ HAS PERMISSION ===
2025-10-09 08:53:23 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Querying NFT mint fee
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - NFT mint fee: 0 wei
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Contract mint fee: 0 wei (0 ETH)
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Encoded function data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Nonce response raw: null
2025-10-09 08:53:24 [http-nio-5000-exec-10] ERROR c.b.service.BlockchainService - Exception while getting nonce: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Gas price response raw: 0x3b9aca00
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - === Gas Limit Setting (Optimized for Path Storage) ===
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Set Gas Limit: 1000000 (optimized for JSON metadata)
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Estimated gas for ~200 bytes JSON: ~500K, using 1M for safety
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Transaction details:
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - To: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Nonce: 0x0
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Gas Price: 0x3b9aca00
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Gas Limit: 1000000
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Value: 0x0
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Transaction sent successfully, Hash: 0x9a91e04658ec04fae804c78758e7c0ccc64739b805610686962d6f24ee74ce13
2025-10-09 08:53:24 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0x9a91e04658ec04fae804c78758e7c0ccc64739b805610686962d6f24ee74ce13
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.service.BlockchainService - Parsed Token ID from receipt: 0
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - === NFT Minting Response ===
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Success: true
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Message: NFT minted successfully
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Transaction Hash: 0x9a91e04658ec04fae804c78758e7c0ccc64739b805610686962d6f24ee74ce13
2025-10-09 08:53:25 [http-nio-5000-exec-10] INFO  c.b.controller.BlockchainController - Token ID: 0
2025-10-09 08:53:25 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:25 [http-nio-5000-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftMintResponse(success=true, message=NFT minted successfully, tokenId=0, imageHash=blockchain://0,  (truncated)...]
2025-10-09 08:53:25 [http-nio-5000-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:53:28 [http-nio-5000-exec-1] INFO  c.b.controller.AdminController - 获取待审核文件列表: page=1, limit=10
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.upload_time desc 
    limit
        ?, ?
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:53:28 [http-nio-5000-exec-1] INFO  c.b.controller.AdminController - 成功获取1条待审核文件
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=1, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=a6ab9f57 (truncated)...]
2025-10-09 08:53:28 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:54:04 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 08:54:04 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:54:04 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-09 08:54:04 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-09 08:54:04 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 35780 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:54:04 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:54:04 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:54:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:54:05 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 43 ms. Found 3 JPA repository interfaces.
2025-10-09 08:54:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:54:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:54:05 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:54:05 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:54:05 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1166 ms
2025-10-09 08:54:05 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:54:05 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:54:05 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:54:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-10-09 08:54:06 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@493386c2
2025-10-09 08:54:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-10-09 08:54:06 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:54:06 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:54:06 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:54:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:54:07 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:54:07 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18557
2025-10-09 08:54:07 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985857301031569390080 wei
2025-10-09 08:54:07 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:54:07 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:54:07 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:54:07 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:54:07 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:54:07 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:54:07 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:54:07 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:54:07 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:54:08 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:54:08 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:54:08 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:54:08 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:54:08 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:54:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:54:08 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 3.844 seconds (process running for 244.527)
2025-10-09 08:54:08 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 08:54:29 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 08:54:29 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:54:29 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-10-09 08:54:29 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-10-09 08:54:29 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 35780 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:54:29 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:54:29 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:54:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:54:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 3 JPA repository interfaces.
2025-10-09 08:54:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:54:30 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:54:30 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:54:30 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:54:30 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 887 ms
2025-10-09 08:54:30 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:54:30 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:54:30 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:54:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-10-09 08:54:30 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@708a7fd9
2025-10-09 08:54:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-10-09 08:54:30 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:54:30 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:54:30 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:54:30 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:54:31 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:54:31 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18557
2025-10-09 08:54:31 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985857301031569390080 wei
2025-10-09 08:54:31 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:54:31 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:54:31 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:54:31 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:54:31 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:54:31 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:54:31 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:54:31 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:54:31 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:54:32 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:54:32 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:54:32 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:54:32 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:54:32 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:54:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:54:32 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.906 seconds (process running for 268.408)
2025-10-09 08:54:32 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 08:55:43 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:55:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-10-09 08:55:43 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-10-09 08:55:58 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 16988 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 08:55:58 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 08:55:58 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 08:55:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-09 08:55:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-09 08:55:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 08:56:00 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 141 ms. Found 3 JPA repository interfaces.
2025-10-09 08:56:01 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 08:56:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 08:56:01 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 08:56:01 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 08:56:01 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3370 ms
2025-10-09 08:56:02 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 08:56:02 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.3.1.Final
2025-10-09 08:56:02 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 08:56:02 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 08:56:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-09 08:56:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@13a90fb9
2025-10-09 08:56:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-09 08:56:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 08:56:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 08:56:05 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 08:56:05 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 08:56:06 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-09 08:56:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 08:56:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18557
2025-10-09 08:56:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985857301031569390080 wei
2025-10-09 08:56:09 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 08:56:09 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:56:09 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:56:09 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:56:10 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 08:56:10 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 08:56:10 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 08:56:10 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 08:56:10 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 08:56:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 08:56:10 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 08:56:10 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 08:56:11 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 08:56:11 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 08:56:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 08:56:11 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 14.086 seconds (process running for 15.386)
2025-10-09 08:57:37 [http-nio-5000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 08:57:37 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@7b65df31
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@7c643f1d
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 08:57:37 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/approved-users?page=1&limit=10", parameters={masked}
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getApprovedUsers(int, int)
2025-10-09 08:57:37 [http-nio-5000-exec-1] INFO  c.b.controller.AdminController - 获取已审核文件列表: page=1, limit=10
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.audit_time desc 
    limit
        ?, ?
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:57:37 [http-nio-5000-exec-1] INFO  c.b.controller.AdminController - 成功获取5条已审核文件
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:37 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=5, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=b4358e6a (truncated)...]
2025-10-09 08:57:38 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/material-detail/25", parameters={}
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getMaterialDetail(Long)
2025-10-09 08:57:38 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 获取材料详情: id=25
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ni1_0.id,
        ni1_0.base64_data,
        ni1_0.image_hash,
        ni1_0.image_height,
        ni1_0.image_name,
        ni1_0.image_path,
        ni1_0.image_size,
        ni1_0.image_type,
        ni1_0.image_width,
        ni1_0.mint_status,
        ni1_0.nft_description,
        ni1_0.nft_name,
        ni1_0.original_name,
        ni1_0.proof_file_id,
        ni1_0.status,
        ni1_0.thumbnail_path,
        ni1_0.token_id,
        ni1_0.transaction_hash,
        ni1_0.upload_time,
        ni1_0.user_account_id 
    from
        nft_images ni1_0 
    where
        ni1_0.user_account_id=? 
    order by
        ni1_0.upload_time desc
2025-10-09 08:57:38 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 成功读取NFT图片数据，大小: 211119 bytes
2025-10-09 08:57:38 [http-nio-5000-exec-2] INFO  c.b.controller.AdminController - 材料详情获取成功: 25
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={fileName=b4358e6ac83a48ce9c068914e6325c3c_1759925535234.docx, displayName=efg, adminApprovedD (truncated)...]
2025-10-09 08:57:38 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/approve-representative-work", parameters={}
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#approveRepresentativeWork(Map)
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{userId=11, approved=true}]
2025-10-09 08:57:45 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - 📥 收到代表作审批请求: {userId=11, approved=true}
2025-10-09 08:57:45 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - 🔍 更新代表作展示审批: userId=11, approved=true
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:57:45 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - 📝 更新前: wallet=38e1ef2285bec94b2602f239f2471004ebf120b4, displayName=efg, adminApprovedDisplay=false
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:57:45 [http-nio-5000-exec-3] INFO  c.b.controller.AdminController - ✅ 更新后: wallet=38e1ef2285bec94b2602f239f2471004ebf120b4, displayName=efg, adminApprovedDisplay=true
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{success=true, message=已同意展示代表作}]
2025-10-09 08:57:45 [http-nio-5000-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:45 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/admin/review", parameters={}
2025-10-09 08:57:45 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#reviewUser(Map)
2025-10-09 08:57:45 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [{username=efg, approve=1, firstnum=0, secondnum=1, thirdnum=0, proofFileId=25}]
2025-10-09 08:57:45 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 审核用户: username=efg, approve=1, gold=0, silver=1, bronze=0, proofFileId=25
2025-10-09 08:57:45 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.display_name=?
2025-10-09 08:57:45 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:57:45 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 开始向区块链发放勋章: 用户=38e1ef2285bec94b2602f239f2471004ebf120b4, 金牌=0, 银牌=1, 铜牌=0
2025-10-09 08:57:45 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Distributing medals to: 38e1ef2285bec94b2602f239f2471004ebf120b4 (wallet signing)
2025-10-09 08:57:45 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Checking distributor permission for address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Distributor permission response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Has distributor permission: true
2025-10-09 08:57:46 [http-nio-5000-exec-4] WARN  c.b.service.BlockchainService - Failed to get nonce, using default value 0: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Current gas price: 1000000000 wei
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction info:
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - To: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Nonce: 0
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Gas Limit: 300000
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Value: 0
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Data: 0x6cd7d05700000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction sent to blockchain, hash: 0x9edfb64bc42306327ce7078cbe4cba72a18c170bb471f0630a8551ae0331cb63
2025-10-09 08:57:46 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0x9edfb64bc42306327ce7078cbe4cba72a18c170bb471f0630a8551ae0331cb63
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 区块链勋章发放成功: txHash=0x9edfb64bc42306327ce7078cbe4cba72a18c170bb471f0630a8551ae0331cb63
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainSyncService - Syncing medal data for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.service.BlockchainSyncService - Medal data sync completed for user 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 区块链数据同步成功
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.id=?
2025-10-09 08:57:47 [http-nio-5000-exec-4] WARN  c.b.controller.AdminController - 文件ID=25不属于用户efg或已审核
2025-10-09 08:57:47 [http-nio-5000-exec-4] INFO  c.b.controller.AdminController - 审核成功: 用户efg获得金牌0、银牌1、铜牌0
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{code=1, success=true, message=审核通过！为用户 efg 分配了 0 金牌、1 银牌、0 铜牌}]
2025-10-09 08:57:47 [http-nio-5000-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:47 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/blockchain/nft/mint", parameters={}
2025-10-09 08:57:47 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#mintNft(NftMintRequest)
2025-10-09 08:57:48 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [NftMintRequest(ownerAddress=38e1ef2285bec94b2602f239f2471004ebf120b4, name=efg的贡献证明, description=efg (truncated)...]
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - === NFT Minting Request ===
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Owner Address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - NFT Name: efg的贡献证明
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Description: efg的贡献的NFT纪念证书
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Image Data Length: 187
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Image Data Preview: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"ima
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Minting NFT for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Normalized address: 0x38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Checking NFT Minting Permission ===
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Checking address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT contract address: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Encoded function: 0x92133cde0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Permission check response: 0x0000000000000000000000000000000000000000000000000000000000000001
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Mint Permission Result: ✅ HAS PERMISSION ===
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Querying NFT mint fee
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - NFT mint fee: 0 wei
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Contract mint fee: 0 wei (0 ETH)
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Encoded function data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Nonce response raw: null
2025-10-09 08:57:48 [http-nio-5000-exec-7] ERROR c.b.service.BlockchainService - Exception while getting nonce: Value must be in format 0x[0-9a-fA-F]+
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas price response raw: 0x3b9aca00
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Price: 1000000000
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - === Gas Limit Setting (Optimized for Path Storage) ===
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Set Gas Limit: 1000000 (optimized for JSON metadata)
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Estimated gas for ~200 bytes JSON: ~500K, using 1M for safety
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction details:
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - From: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - To: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Nonce: 0x0
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Price: 0x3b9aca00
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Gas Limit: 1000000
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Value: 0x0
2025-10-09 08:57:48 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Data: 0xe2b4a16b00000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b400000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction sent successfully, Hash: 0x2b49dda3f9deedd0e735da589b140a6e2c18c1eed5ea08be58c5d4d62c0aa548
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Waiting for transaction receipt: 0x2b49dda3f9deedd0e735da589b140a6e2c18c1eed5ea08be58c5d4d62c0aa548
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Transaction confirmed!
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.service.BlockchainService - Parsed Token ID from receipt: 0
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - === NFT Minting Response ===
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Success: true
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Message: NFT minted successfully
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Transaction Hash: 0x2b49dda3f9deedd0e735da589b140a6e2c18c1eed5ea08be58c5d4d62c0aa548
2025-10-09 08:57:49 [http-nio-5000-exec-7] INFO  c.b.controller.BlockchainController - Token ID: 0
2025-10-09 08:57:49 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:49 [http-nio-5000-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftMintResponse(success=true, message=NFT minted successfully, tokenId=0, imageHash=blockchain://0,  (truncated)...]
2025-10-09 08:57:49 [http-nio-5000-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/admin/pending-users?page=1&limit=10", parameters={masked}
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.AdminController#getPendingUsers(int, int)
2025-10-09 08:57:52 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 获取待审核文件列表: page=1, limit=10
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        pf1_0.id,
        pf1_0.audit_status,
        pf1_0.audit_time,
        pf1_0.file_hash,
        pf1_0.file_name,
        pf1_0.file_path,
        pf1_0.file_size,
        pf1_0.file_type,
        pf1_0.medal_award_time,
        pf1_0.medal_awarded,
        pf1_0.medal_transaction_hash,
        pf1_0.original_name,
        pf1_0.status,
        pf1_0.upload_time,
        pf1_0.user_account_id 
    from
        proof_files pf1_0 
    where
        pf1_0.audit_status=? 
    order by
        pf1_0.upload_time desc 
    limit
        ?, ?
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.id=?
2025-10-09 08:57:52 [http-nio-5000-exec-6] INFO  c.b.controller.AdminController - 成功获取1条待审核文件
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json]
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{total=1, code=1, success=true, totalPages=1, message=获取成功, currentPage=1, users=[{fileName=a6ab9f57 (truncated)...]
2025-10-09 08:57:52 [http-nio-5000-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 08:57:53 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/ranking", parameters={}
2025-10-09 08:57:53 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalRanking(int, int)
2025-10-09 08:57:53 [http-nio-5000-exec-5] INFO  c.b.c.MedalRankingController - Getting medal ranking: page=0, size=20
2025-10-09 08:57:53 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainSyncService - Starting blockchain data synchronization...
2025-10-09 08:57:53 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainSyncService - Syncing global statistics...
2025-10-09 08:57:54 [http-nio-5000-exec-5] ERROR c.b.service.BlockchainSyncService - Global statistics sync failed
java.lang.IndexOutOfBoundsException: Index: 0
	at java.base/java.util.Collections$EmptyList.get(Collections.java:4807)
	at com.brokerwallet.service.BlockchainSyncService.syncGlobalStats(BlockchainSyncService.java:103)
	at com.brokerwallet.service.BlockchainSyncService.syncBlockchainData(BlockchainSyncService.java:55)
	at com.brokerwallet.controller.MedalRankingController.getMedalRanking(MedalRankingController.java:53)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:352)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:713)
	at com.brokerwallet.controller.MedalRankingController$$SpringCGLIB$$0.getMedalRanking(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:254)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:182)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-10-09 08:57:54 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainSyncService - Syncing user medal data...
2025-10-09 08:57:54 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0
2025-10-09 08:57:54 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Querying medals for address: 8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 08:57:54 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:57:54 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainSyncService - Syncing user 8c056ccb92c567da3fee27c23d4f2f107f203879 medal data - Gold: 29, Silver: 3, Bronze: 3
2025-10-09 08:57:54 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainService - Querying medals for address: 38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    update
        user_accounts 
    set
        admin_approved_display=?,
        blockchain_bronze_medals=?,
        blockchain_gold_medals=?,
        blockchain_silver_medals=?,
        blockchain_sync_time=?,
        bronze_medals=?,
        create_time=?,
        display_name=?,
        gold_medals=?,
        representative_work=?,
        show_representative_work=?,
        silver_medals=?,
        status=?,
        total_medals=?,
        total_nfts=?,
        total_proofs=?,
        update_time=?,
        verified_proofs=?,
        wallet_address=? 
    where
        id=?
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG c.b.service.BlockchainSyncService - Syncing user 38e1ef2285bec94b2602f239f2471004ebf120b4 medal data - Gold: 1, Silver: 2, Bronze: 2
2025-10-09 08:57:55 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainSyncService - User medal data sync completed, synced 2 users
2025-10-09 08:57:55 [http-nio-5000-exec-5] INFO  c.b.service.BlockchainSyncService - Blockchain data synchronization completed
2025-10-09 08:57:55 [http-nio-5000-exec-5] INFO  c.b.service.UserAccountService - 查询勋章排行榜: page=0, size=20
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        (
            ua1_0.gold_medals>0 
            or ua1_0.silver_medals>0 
            or ua1_0.bronze_medals>0
        ) 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        ?, ?
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG c.b.c.MedalRankingController - 用户 8c056ccb92c567da3fee27c23d4f2f107f203879 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=false, representativeWork=有
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG c.b.c.MedalRankingController - 用户 38e1ef2285bec94b2602f239f2471004ebf120b4 代表作展示: showRepresentativeWork=true, adminApprovedDisplay=true, representativeWork=有
2025-10-09 08:57:55 [http-nio-5000-exec-5] INFO  c.b.c.MedalRankingController - 排行榜查询成功，返回2条记录
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data=[{displayName=abc, goldMedals=29, bronzeMedals=3, representativeWork=null, silverMedals=3, sho (truncated)...]
2025-10-09 08:57:55 [http-nio-5000-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 09:00:08 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 25 class path changes (0 additions, 0 deletions, 25 modifications)
2025-10-09 09:00:08 [Thread-7] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:00:08 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-09 09:00:08 [Thread-7] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-09 09:00:08 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 16988 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 09:00:08 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 09:00:08 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 09:00:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 09:00:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 3 JPA repository interfaces.
2025-10-09 09:00:10 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 09:00:10 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 09:00:10 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 09:00:10 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 09:00:10 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1881 ms
2025-10-09 09:00:11 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 09:00:11 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 09:00:11 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 09:00:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-10-09 09:00:11 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4fc45288
2025-10-09 09:00:11 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-10-09 09:00:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 09:00:11 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 09:00:11 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 09:00:11 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:00:11 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 09:00:12 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18565
2025-10-09 09:00:12 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985843748731569390080 wei
2025-10-09 09:00:12 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 09:00:12 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 09:00:12 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 09:00:12 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:00:12 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 09:00:12 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 09:00:12 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 09:00:12 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 09:00:12 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 09:00:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 09:00:13 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 09:00:13 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 09:00:13 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 09:00:13 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 09:00:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 09:00:13 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 4.417 seconds (process running for 257.159)
2025-10-09 09:00:13 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 09:00:28 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 25 class path changes (0 additions, 0 deletions, 25 modifications)
2025-10-09 09:00:28 [Thread-9] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:00:28 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-10-09 09:00:28 [Thread-9] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-10-09 09:00:28 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 16988 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 09:00:28 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 09:00:28 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 09:00:28 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 09:00:28 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 3 JPA repository interfaces.
2025-10-09 09:00:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 09:00:28 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 09:00:28 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 09:00:28 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 09:00:28 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 689 ms
2025-10-09 09:00:28 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 09:00:28 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 09:00:28 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 09:00:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2025-10-09 09:00:28 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7094a4d6
2025-10-09 09:00:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2025-10-09 09:00:28 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 09:00:28 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 09:00:29 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 09:00:29 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:00:29 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 09:00:29 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18565
2025-10-09 09:00:30 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985843748731569390080 wei
2025-10-09 09:00:30 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 09:00:30 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 09:00:30 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 09:00:30 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:00:30 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 09:00:30 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 09:00:30 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 09:00:30 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 09:00:30 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 09:00:30 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 09:00:30 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 09:00:30 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 09:00:30 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 09:00:30 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 09:00:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 09:00:30 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.683 seconds (process running for 274.663)
2025-10-09 09:00:30 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@9f5def
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@19a38a08
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/blockchain/nft/all?page=0&size=5", parameters={masked}
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/medal/stats", parameters={}
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.BlockchainController#queryAllNfts(int, int)
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.brokerwallet.controller.MedalRankingController#getMedalStats()
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.controller.BlockchainController - Querying all NFTs: page=0, size=5
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Querying all NFTs: page=0, size=5
2025-10-09 09:06:52 [http-nio-5000-exec-2] INFO  c.b.c.MedalRankingController - 获取勋章统计信息
2025-10-09 09:06:52 [http-nio-5000-exec-2] INFO  c.b.service.UserAccountService - 获取勋章统计信息
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        count(*) 
    from
        user_accounts ua1_0
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.gold_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.silver_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        coalesce(sum(ua1_0.bronze_medals), 0) 
    from
        user_accounts ua1_0
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    order by
        (((ua1_0.gold_medals*3)+(ua1_0.silver_medals*2))+ua1_0.bronze_medals) desc,
        ua1_0.gold_medals desc,
        ua1_0.silver_medals desc 
    limit
        1
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{data={totalUsers=2, highestScore=96, totalBronzeMedals=5, totalGoldMedals=30, totalSilverMedals=5,  (truncated)...]
2025-10-09 09:06:52 [http-nio-5000-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Total NFT supply: 8
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 1: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199be4924370000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001497b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30375431303a34383a30382e3434395a222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000000000000000000000000000000000
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-10-07T10:48:08.449Z","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759834088503
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 09:06:52 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759834088503
2025-10-09 09:06:52 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759834088503 to 2025-10-07 18:48:08
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=8c056ccb92c567da3fee27c23d4f2f107f203879, 花名=abc
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #1 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (abc)
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=1, ownerDisplayName=abc
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 2: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000028000000000000000000000000000000000000000000000000000000199c2f226410000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f203879000000000000000000000000000000000000000000000000000000000000000fe8b4a1e78caee8af81e6988e4e46540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002de794a8e688b7e68f90e4baa4e79a84e8af81e6988ee69d90e69699e79a844e4654e7baaae5bfb5e8af81e4b9a60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c77b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001447b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a6e756c6c2c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d30392d31385431373a35373a3335222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f37383330343161393861333134353763613666653237393833336131353331325f31373538313832393735343937222c2274797065223a226170706c69636174696f6e2f6f637465742d73747265616d222c2273697a65223a3336313434362c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000000000000000000000000000000000000000000000
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 2050
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: 贡献证明NFT
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: 用户提交的证明材料的NFT纪念证书
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":null,"contribution":"科研贡献证明","timestamp":"2025-09-18T17:57:35","imageMetadata":{"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759912273473
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497","type":"application/octet-stream","size":361446,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 09:06:53 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/783041a98a31457ca6fe279833a15312_1758182975497
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759912273473
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759912273473 to 2025-10-08 16:31:13
2025-10-09 09:06:53 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=8c056ccb92c567da3fee27c23d4f2f107f203879, 花名=abc
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #2 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (abc)
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=2, ownerDisplayName=abc
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 3: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3b2c16a0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f2038790000000000000000000000000000000000000000000000000000000000000012616263e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e616263e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000ba7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d00000000000000000000000000000000000000000000000000000000000000000000000001387b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22616263222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a30303a3337222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f362f34663738343433646464343234633734383336613333393861343735396264625f313735393932343833363530382e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3239383235302c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d0000000000000000
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: abc的贡献证明
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: abc的贡献的NFT纪念证书
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"abc","contribution":"科研贡献证明","timestamp":"2025-10-08T20:00:37","imageMetadata":{"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759924896106
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg","type":"image/*","size":298250,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/6/4f78443ddd424c74836a3398a4759bdb_1759924836508.jpg
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759924896106
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759924896106 to 2025-10-08 20:01:36
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x8c056ccb92c567da3fee27c23d4f2f107f203879, 标准化地址=8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:54 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=8c056ccb92c567da3fee27c23d4f2f107f203879, 花名=abc
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #3 持有者: 0x8c056ccb92c567da3fee27c23d4f2f107f203879 (abc)
2025-10-09 09:06:54 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=3, ownerDisplayName=abc
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 4: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c3c8ad730000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759926332787
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:55 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759926332787
2025-10-09 09:06:55 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759926332787 to 2025-10-08 20:25:32
2025-10-09 09:06:55 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 09:06:55 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:55 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=38e1ef2285bec94b2602f239f2471004ebf120b4, 花名=efg
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #4 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (efg)
2025-10-09 09:06:55 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=4, ownerDisplayName=efg
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 5: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c66d381d0000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759970670621
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:56 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759970670621
2025-10-09 09:06:56 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759970670621 to 2025-10-09 08:44:30
2025-10-09 09:06:56 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 09:06:56 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:56 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=38e1ef2285bec94b2602f239f2471004ebf120b4, 花名=efg
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #5 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (efg)
2025-10-09 09:06:56 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=5, ownerDisplayName=efg
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 6: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c67356570000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759971071575
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759971071575
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759971071575 to 2025-10-09 08:51:11
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=38e1ef2285bec94b2602f239f2471004ebf120b4, 花名=efg
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #6 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (efg)
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=6, ownerDisplayName=efg
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 7: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c6754f050000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759971200773
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:57 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759971200773
2025-10-09 09:06:57 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759971200773 to 2025-10-09 08:53:20
2025-10-09 09:06:58 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 09:06:58 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:58 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=38e1ef2285bec94b2602f239f2471004ebf120b4, 花名=efg
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #7 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (efg)
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=7, ownerDisplayName=efg
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata raw response for token 8: 0x00000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001200000000000000000000000000000000000000000000000000000000000000160000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000199c67958d10000000000000000000000008c056ccb92c567da3fee27c23d4f2f107f20387900000000000000000000000038e1ef2285bec94b2602f239f2471004ebf120b40000000000000000000000000000000000000000000000000000000000000012656667e79a84e8b4a1e78caee8af81e6988e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e656667e79a84e8b4a1e78caee79a844e4654e7baaae5bfb5e8af81e4b9a6000000000000000000000000000000000000000000000000000000000000000000bb7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d000000000000000000000000000000000000000000000000000000000000000000000001397b2274797065223a22757365722d75706c6f61646564222c22617574686f72223a22656667222c22636f6e747269627574696f6e223a22e7a791e7a094e8b4a1e78caee8af81e6988e222c2274696d657374616d70223a22323032352d31302d30385432303a31323a3135222c22696d6167654d65746164617461223a7b2270617468223a2275706c6f6164732f6e66742d696d616765732f75736572732f31312f39623433356235393332373534303532613837316531646230653933316533385f313735393932353533353330342e6a7067222c2274797065223a22696d6167652f2a222c2273697a65223a3231313131392c2273746f7261676554797065223a226261636b656e642d736572766572222c2273657276657255726c223a22687474703a2f2f6c6f63616c686f73743a35303030227d7d00000000000000
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Response value length: 1858
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Decoded 7 fields from NFT metadata
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT metadata parsing result:
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Name: efg的贡献证明
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Description: efg的贡献的NFT纪念证书
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Attributes: {"type":"user-uploaded","author":"efg","contribution":"科研贡献证明","timestamp":"2025-10-08T20:12:15","imageMetadata":{"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}}
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Mint time: 1759971465425
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Minter: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Processing image metadata: {"path":"uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg","type":"image/*","size":211119,"storageType":"backend-server","serverUrl":"http://localhost:5000"}
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - ✅ Returning image URL for frontend: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:58 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - Final image URL: http://localhost:5000/uploads/nft-images/users/11/9b435b5932754052a871e1db0e931e38_1759925535304.jpg
2025-10-09 09:06:58 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatting millisecond timestamp: 1759971465425
2025-10-09 09:06:58 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - Formatted timestamp 1759971465425 to 2025-10-09 08:57:45
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 查询持有者花名: 原始地址=0x38e1ef2285bec94b2602f239f2471004ebf120b4, 标准化地址=38e1ef2285bec94b2602f239f2471004ebf120b4
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG org.hibernate.SQL - 
    select
        ua1_0.id,
        ua1_0.admin_approved_display,
        ua1_0.blockchain_bronze_medals,
        ua1_0.blockchain_gold_medals,
        ua1_0.blockchain_silver_medals,
        ua1_0.blockchain_sync_time,
        ua1_0.bronze_medals,
        ua1_0.create_time,
        ua1_0.display_name,
        ua1_0.gold_medals,
        ua1_0.representative_work,
        ua1_0.show_representative_work,
        ua1_0.silver_medals,
        ua1_0.status,
        ua1_0.total_medals,
        ua1_0.total_nfts,
        ua1_0.total_proofs,
        ua1_0.update_time,
        ua1_0.verified_proofs,
        ua1_0.wallet_address 
    from
        user_accounts ua1_0 
    where
        ua1_0.wallet_address=?
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG c.b.service.BlockchainService - 找到用户: 地址=38e1ef2285bec94b2602f239f2471004ebf120b4, 花名=efg
2025-10-09 09:06:59 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NFT #8 持有者: 0x38e1ef2285bec94b2602f239f2471004ebf120b4 (efg)
2025-10-09 09:06:59 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - NftInfo构建完成: tokenId=8, ownerDisplayName=efg
2025-10-09 09:06:59 [http-nio-5000-exec-1] INFO  c.b.service.BlockchainService - All NFTs pagination result: Total=8, Page=0, PageSize=5, ReturnCount=5
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [NftQueryResult(address=all, nfts=[NftQueryResult.NftInfo(tokenId=1, ownerAddress=0x8c056ccb92c567da3 (truncated)...]
2025-10-09 09:06:59 [http-nio-5000-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-09 09:14:51 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 09:14:51 [Thread-14] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:14:51 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2025-10-09 09:14:51 [Thread-14] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2025-10-09 09:14:51 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 16988 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 09:14:51 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 09:14:51 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 09:14:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 09:14:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 3 JPA repository interfaces.
2025-10-09 09:14:52 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 09:14:52 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 09:14:52 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 09:14:52 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 09:14:52 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 842 ms
2025-10-09 09:14:52 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 09:14:52 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 09:14:52 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 09:14:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Starting...
2025-10-09 09:14:52 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-4 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4efda54b
2025-10-09 09:14:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Start completed.
2025-10-09 09:14:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 09:14:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 09:14:52 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 09:14:52 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:14:53 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 09:14:53 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18582
2025-10-09 09:14:53 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985843748731569390080 wei
2025-10-09 09:14:53 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 09:14:53 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 09:14:53 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 09:14:53 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:14:54 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 09:14:54 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 09:14:54 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 09:14:54 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 09:14:54 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 09:14:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 09:14:54 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 09:14:54 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 09:14:54 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 09:14:54 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 09:14:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 09:14:54 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 3.192 seconds (process running for 1138.383)
2025-10-09 09:14:54 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 09:15:14 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-09 09:15:14 [Thread-19] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:15:14 [Thread-19] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown initiated...
2025-10-09 09:15:14 [Thread-19] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-4 - Shutdown completed.
2025-10-09 09:15:14 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Starting BrokerWalletBackendApplication using Java 21.0.8 with PID 16988 (D:\brokerwallet\BrokerWallet-backend\target\classes started by wanweijie in D:\brokerwallet\BrokerWallet-backend)
2025-10-09 09:15:14 [restartedMain] DEBUG c.b.BrokerWalletBackendApplication - Running with Spring Boot v3.2.0, Spring v6.1.1
2025-10-09 09:15:14 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-09 09:15:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-09 09:15:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 3 JPA repository interfaces.
2025-10-09 09:15:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 5000 (http)
2025-10-09 09:15:15 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-09 09:15:15 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-10-09 09:15:15 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-09 09:15:15 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 621 ms
2025-10-09 09:15:15 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-09 09:15:15 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-09 09:15:15 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-09 09:15:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Starting...
2025-10-09 09:15:15 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-5 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3470f6e5
2025-10-09 09:15:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Start completed.
2025-10-09 09:15:15 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-09 09:15:15 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-10-09 09:15:15 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-09 09:15:15 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:15:15 [restartedMain] INFO  c.b.config.BlockchainConfig - Connected to BrokerChain client: null
2025-10-09 09:15:16 [restartedMain] INFO  c.b.config.BlockchainConfig - Current block number: 18582
2025-10-09 09:15:16 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985843748731569390080 wei
2025-10-09 09:15:16 [restartedMain] INFO  c.b.config.BlockchainConfig - Account balance: 8985 ETH
2025-10-09 09:15:16 [restartedMain] INFO  c.b.service.BlockchainService - BlockchainService initialized with medal contract: 0x1a202bfa10ea97a742ad22fcb1a7913821bf1b18
2025-10-09 09:15:16 [restartedMain] INFO  c.b.service.BlockchainService - NFT contract: 0x1bd997AE79DF9453b75b7b8D016a652a9c62E980
2025-10-09 09:15:16 [restartedMain] INFO  c.b.service.BlockchainService - Account address: 0x8c056ccb92c567da3fee27c23d4f2f107f203879
2025-10-09 09:15:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating file processor thread pool
2025-10-09 09:15:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - File processor thread pool created - Core: 2, Max: 5, Queue: 100
2025-10-09 09:15:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - Creating general async thread pool
2025-10-09 09:15:16 [restartedMain] INFO  com.brokerwallet.config.AsyncConfig - General async thread pool created - Core: 5, Max: 10, Queue: 200
2025-10-09 09:15:16 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-09 09:15:17 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 47 mappings in 'requestMappingHandlerMapping'
2025-10-09 09:15:17 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /uploads/**] in 'resourceHandlerMapping'
2025-10-09 09:15:17 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-09 09:15:17 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-09 09:15:17 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-09 09:15:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 5000 (http) with context path ''
2025-10-09 09:15:17 [restartedMain] INFO  c.b.BrokerWalletBackendApplication - Started BrokerWalletBackendApplication in 2.52 seconds (process running for 1161.08)
2025-10-09 09:15:17 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-09 09:21:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-09 09:21:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown initiated...
2025-10-09 09:21:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-5 - Shutdown completed.
